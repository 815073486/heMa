<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <!-- Favicons Icon -->
  <title>Brezza</title>
  <!-- Mobile Specific -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <!-- CSS Style -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/font-awesome.css" />
  <link rel="stylesheet" type="text/css" href="css/owl.carousel.css" />
  <link rel="stylesheet" type="text/css" href="css/jquery.mobile-menu.css" />
  <link rel="stylesheet" type="text/css" href="css/revslider.css" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <!-- Google Fonts -->
  <link href="css/ac2ae5775c664fb682a6b10e460efad2.css" rel="stylesheet" />
  <!-- 引入底部 -->
  <link rel="import" href="footer.html" id="footer">
 </head>

 <body class="wishlist-page">
  <div id="page">
   <!-- header -->
   <header>
    <div class="header-container">
     <div class="header-top">
      <div class="container">
       <div class="row">
        <!-- Header Language -->
        <div class="col-xs-12 col-sm-6">

        </div>
        <div class="col-xs-6 hidden-xs">
         <!-- Header Top Links -->
         <div class="toplinks">
          <div class="links">
           <div class="login">
            <a href="login.html"><span class="hidden-xs">登陆/切换用户</span></a>
           </div>
          </div>
         </div>
         <!-- End Header Top Links -->
        </div>
       </div>
      </div>
     </div>
     <div class="container">
      <div class="row">
       <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 logo-block">
        <!-- Logo -->
        <div class="logo">
         <a title="Brezza" href="index.html"><img alt="Brezza Logo" src="picture/logo.png" /></a>
        </div>
        <!-- End Logo -->
       </div>

       <!-- 上方搜索框 -->
       <div class="col-lg-5 col-md-4 col-sm-4 col-xs-12 hidden-xs">
        <div class="search-box">
         <form action="cat" method="POST" id="search_mini_form" name="Categories">
          <input type="text" placeholder="查找更多..." maxlength="70" name="search" id="search" />
          <button type="button" id="commbtn" class="search-btn-bg"><span class="glyphicon glyphicon-search"></span>&nbsp;</button>
         </form>
        </div>
       </div>
       <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12 mgk-top-cart">

        <div class="top-cart-contain pull-right">


         <!-- Top Cart -->
         <!-- 购物车 -->
         <div class="mini-cart">
          <div data-toggle="dropdown" data-hover="dropdown" class="basket dropdown-toggle">
           <a href="shopping_cart.html"><span class="cart_count"></span><span class="cart-title hidden-xs hidden-sm">我的 car/</span>
            <span class="price hidden-xs">￥金额</span></a>
          </div>
          <div>
           <div class="top-cart-content">
            <ul class="mini-products-list" id="cart-sidebar" >


             <li class="item" th:each="car,carstat:${session.carlist}">
              <div class="item-inner">
               <a class="product-image" title="Retis lapen casen" th:href="@{'../commDetails?cid='+${car.commid}}">
                <img alt="Retis lapen casen" th:attr="src=${car.commimg}" /></a>
               <div class="product-details">
                <div class="access">
                 <a class="btn-remove1" title="Remove This Item" th:attr="id='car'+${car.mycarid}" th:onclick="|del(${car.mycarid})|">
                  删除该商品</a>
                </div>
                <strong th:text="${car.commsum}"></strong>份

                <span style="color: red">￥</span><span class="price" th:text="${car.price}"></span>
                <p class="product-name"><a th:href="@{'../commDetails?cid='+${car.commid}}" th:text="${car.commname}"></a></p>
               </div>
              </div></li>


            </ul>
            <div class="actions">
             <a href="../insertCar" class="view-cart"><i class="fa fa-shopping-cart"></i><span>查看我的购物车</span></a>
            </div>
           </div>
          </div>
         </div>
         <!--购物车结束 -->
        </div>
       </div>
      </div>
     </div>
    </div>
    <!-- End Header -->
    <!-- Navigation -->
    <nav>
     <div class="container">
      <div class="mm-toggle-wrap">
       <div class="mm-toggle">
        <i class="fa fa-align-justify"></i>
        <span class="mm-label">Menu</span>
       </div>
      </div>


      <!--  头部导航栏  -->
      <div class="nav-inner" id="app">
       <ul id="nav" class="hidden-xs" th:each="verify,v:${session.dh}" style="display: inline-block">
        <!--  蔬菜  -->
        <li class="mega-menu" id="head" th:if="${verify.classifyid eq verify.fatherid}">
         <!-- 根据分类进行查询未添加 -->
         <a class="level-top"><span th:text="${verify.classifyname}">  </span></a>
         <div class="level0-wrapper dropdown-6col" style="margin-right: 200px">
          <div class="container">
           <div class="level0-wrapper2">
            <div class="nav-block nav-block-center">
             <ul class="level0" >
              <li class="level3 parent item"><a href="../mumeFall"><span>Brezza</span></a>
               <ul class="level1" th:each="ver,v:${session.dh}">
                <li th:if="${verify.classifyid eq ver.fatherid&&ver.classifyid != ver.fatherid}">
                 <a th:href="@{'../comm_by_classifyid?classifyid='+${ver.classifyid}}">
                  <span th:text="${ver.classifyname}"></span></a></li>
               </ul>
              </li>
             </ul>
            </div>
           </div>
          </div>
         </div></li>
       </ul>
      </div>
     </div>
    </nav>
    <!-- End nav -->
   </header>

   <div class="main-container col2-right-layout">
    <div class="main container">
     <div class="row">
      <section class="col-sm-9 col-xs-12">
       <div class="col-main">
        <div class="my-account">
         <div class="page-title">
          <h2>购物车</h2>
         </div>
         <div class="my-wishlist">
          <div class="table-responsive">
           <form method="post" action="#" id="wishlist-view-form">
            <fieldset>
             <table id="wishlist-table" class="clean-table linearize-table data-table">
              <thead>
               <tr class="first last">
                <th class="customer-wishlist-item-image">商品图片</th>
                <th class="customer-wishlist-item-info">商品信息</th>
                <th class="customer-wishlist-item-quantity">数量</th>
                <th class="customer-wishlist-item-price">价格</th>
                <th class="customer-wishlist-item-cart">结算</th>
                <th class="customer-wishlist-item-remove">删除商品</th>
               </tr>
              </thead>
              <tbody  th:each="car,carstat:${session.carlist}">

               <tr class="first odd">
                <td class="wishlist-cell0 customer-wishlist-item-image">
                 <a title="Retis lapen casen" th:href="@{'../commDetails?cid='+${car.commid}}" class="product-image">
                 <img width="150" alt="Retis lapen casen"  th:attr="src=${car.commimg}" /></a></td>
                <td class="wishlist-cell1 customer-wishlist-item-info" style="width: 250px" > <a>商品名：</a>
                 <h3 class="product-name">
                 <a title="Retis lapen casen" th:href="@{'../commDetails?cid='+${car.commid}}" th:text="${car.commname}"></a>
                 </h3>
                 <br/>
                 <a>商品参数:</a>
                 <br/>
                 <h3 class="product-name">
                  <a title="Retis lapen casen" th:href="@{'../commDetails?cid='+${car.commid}}" th:text="${car.parameter}"></a>
                 </h3>
                </td>
                <td data-rwd-label="Quantity" class="wishlist-cell2 customer-wishlist-item-quantity">
                 <div class="pull-left">
                  <div class="custom pull-left">
                   <button th:attr="id='minus'+${car.mycarid}" th:onclick="|minus(${car.mycarid})|" class="reduced items-count" type="button"><i class="fa fa-minus">&nbsp;</i></button>
                   <input type="text" th:attr="value=${car.commsum}" class="input-text qty" title="Qty" value="1" maxlength="12" id="qty" name="qty" readonly="readonly"/>
                   <button th:attr="id='add'+${car.mycarid}" th:onclick="|add(${car.mycarid})|"  class="increase items-count" type="button"><i class="fa fa-plus">&nbsp;</i></button>
                  </div>
                 </div>
                </td>
                <td data-rwd-label="Price" class="wishlist-cell3 customer-wishlist-item-price">
                 <div class="cart-cell">
                  <div class="price-box">
                   <span class="regular-price"><span id="byidmoney" class="price" th:text="${car.price}"></span></span>
                  </div>
                 </div></td>
                <td class="wishlist-cell4 customer-wishlist-item-cart">
                 <div class="cart-cell">
                  <a th:href="@{'../addressFadeAll?cid='+${car.mycarid}}"><button class="button btn-cart"  title="Add to Cart" type="button"><span>立即结算</span></button></a>
                 </div><p><a th:href="@{'../addressFadeAll?cid='+${car.mycarid}}" class="">立即结算</a></p></td>
                <td class="wishlist-cell5 customer-wishlist-item-remove last">
                 <a class="remove-item" style="cursor:pointer;" th:attr="id='car'+${car.mycarid}" th:onclick="|del(${car.mycarid})|">
                  <span><span></span></span></a></td>
               </tr>


              </tbody>
             </table>
             <div class="buttons-set buttons-set2">
              <h4>Total Money:￥<a id="summoney" style="color: red" th:text="${session.totalMoney}"></a></h4>
              <a href="../addressFadeAll?cid=0">
               <button class="button btn-share" type="button">
                全部结算</button></a>
             <
             </div>
            </fieldset>
           </form>
          </div>
         </div>
        </div>
       </div>
      </section>
      <aside class="col-right sidebar col-sm-3 col-xs-12">
       <div class="block block-account">
        <div class="block-title">
         My Account
        </div>

        <div class="block-content">
         <ul>
          <li><a href="../mumeFall">全部商品</a></li>
          <li class="current"><a href="../show_Car">购物车</a></li>
          <li><a href="../addressFadeAll?cid=0"  class="current">地址管理</a></li>
          <li><a href="../order_FadeAll" >我的订单</a></li>
          <li><a href="../myLove?cid=0">My Love</a></li>
         </ul>
        </div>

       </div>

      </aside>
     </div>
    </div>
   </div>

   <br/>
   <br/>
   <br/>

  <script type="text/javascript">
   document.write(footer.import.body.innerHTML);
  </script>
  </div>
  <!-- JavaScript -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.mobile-menu.min.js"></script>
  <script src="js/common.js"></script>
  <script type="text/javascript">
    function del(cid) {
     var car="car"+cid;
     if(confirm("确定要删除这件商品吗？？？")){
      $.post("../delCar",{"cid":cid},function (e) {
          if(e=="no"){
           alert("对不起，商品删除失败！！！");
          }else{
           $("#summoney").text(e);
           $("a#"+(car)).parent().parent().parent().remove();
          }
       })
     }
    }


    function add(cid) {
     var add="add"+cid;
     var sum= $("#"+(add)). prev().val();
     $("#"+(add)).prev().val(parseInt(sum)+1);
     $.post("../uptCarCommSum",{"mycarid":cid,"commsum":$("#"+(add)).prev().val()},function (e) {
          if(e==null){
            alert("修改失败！！！");
           }else{
           $("#summoney").text(e["sumMoney"]);
           $("#"+(add)).parent().parent().parent().next().children().children().children().children().text(e["byIdMoney"]);
          }
     })

    }

    function minus(cid) {
     var mins="minus"+cid;
     var sum= $("#"+(mins)).next().val();
     if(sum==1){
      alert("不能再减啦。。。。");
     }else{
      $("#"+(mins)).next().val(sum-1);
      $.post("../uptCarCommSum",{"mycarid":cid,"commsum":$("#"+(mins)).next().val()},function (e) {
            if(e==null){
             alert("修改失败！！！");
            } else{

             $("#summoney").text(e["sumMoney"]);
             $("#"+(mins)).parent().parent().parent().next().children().children().children().children().text(e["byIdMoney"]);
            }
      })

     }

    }
 </script>
 </body>
</html>